<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<title>Mapbox GL JS map</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.css" rel="stylesheet"> 
<script src="https://api.mapbox.com/mapbox-gl-js/v3.6.0/mapbox-gl.js"></script>
<!-- Add JQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>

<body>
    <style>
        .map-overlay-container {  
            position: absolute;
            width: 97%;
            height:auto;
            margin: auto;
            top: 0;
            left: 0;
            padding: 5px;
            z-index: 1;
        }
    
        .map-overlay {
            font: Helvetica, sans-serif;
            background:linear-gradient(345deg,#c4e3c6,#e8ffea);
            border-color: cornsilk;
            border-radius: 3px;
            padding: 10px;
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3);
        }
    
        .map-overlay h2 {
            font: Helvetica, sans-serif;
            text-align: center;
            font-size: 20px;
            color: #0d4a24;
            text-shadow: 0 0 1px #062914;
        }

        .map-overlay p {
            font: Helvetica, sans-serif;
            text-align: center;
            font-size: 16px;
            margin: 0 0 0.5em;
            color: #0d4a24;
        }

        .map-overlay img {
            display: block;
            margin-left: auto;
            margin-right: auto;
            max-height: 100px; /* Make the image fit in the map overlay container */
            box-shadow: 0 0 6px #146232;
            border-radius: 1em; /*Round the corners of the image*/
        }

        /* Mobile first styling */
        @media only screen and (min-width: 600px) {
            .map-overlay-container {width: 98%;}
            .map-overlay h2 {font-size: 30px;}
            .map-overlay p {
                font-size: 18px;
                margin: 0 0 0.6em;
            }
            .map-overlay img {max-height: 250px;}
        }

        @media only screen and (min-width: 850px) {
            .map-overlay-container {
                position:absolute;
                width: 33%;
                padding: 10px;}
            .map-overlay h2 {font-size: 36px;}
            .map-overlay p {
                font-size: 24px;
                margin: 0 0 0.6em;
            }
            .map-overlay img {max-height: 300px;}
        }
    </style>

<div id="map"></div>

<div class="map-overlay-container">
    <div class="map-overlay"> <!--The titles, descriptions, and image sources are defined for their respective locations below-->
        <h2 id="location-title"></h2>
        <p id="location-description"></p>
        <img id="location-photo"></img>
    </div>
</div>

<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiY2phcmNodWxldGExMnV3bSIsImEiOiJjbTFiNXhwenYxbDluMmpvaW5tNWpyaDI1In0.tZ-qZeLZ34HEOdzbLIh4Kw';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/cjarchuleta12uwm/clzbm0i23002r01qp2u2k48c3', // style URL
        center: [-110, 40], // starting position [lng, lat]. Note that lat must be set between -90 and 90
        zoom: 3.4 // starting zoom
    })  

    const title = document.getElementById('location-title'); //From the pop-up/slide/map overlay
    const description = document.getElementById('location-description');
    const photo = document.getElementById('location-photo');

    // Images constant is list of images for the map overlay
    const images = ['Assets/OmjImages/HDGorl.JPG',
    'Assets/OmjImages/Boy01.JPG',
    'Assets/OmjImages/Cats_Christmas.JPG',
    'Assets/OmjImages/UWM.jpg',
    'Assets/OmjImages/Bradford.jpg',
    'Assets/OmjImages/Cheba.jpg',
    'Assets/OmjImages/Knuckleheads.jpg',
    'Assets/OmjImages/Elegant.jpg',
    'Assets/OmjImages/Treinen.jpg',
    'Assets/OmjImages/Tennessee.JPG',
    'Assets/OmjImages/Goth.jpg',
    'Assets/OmjImages/Boy_Peeps.jpg',
    'Assets/OmjImages/Olbrich.JPG',
    'Assets/OmjImages/Botanic.jpg',
    'Assets/OmjImages/Ascend.JPG',
    'Assets/OmjImages/Boba.JPG',
    'Assets/OmjImages/Ridge.jpg',
    'Assets/OmjImages/Lou.JPG',
    'Assets/OmjImages/Shedd.jpg',
    'Assets/OmjImages/Lantern.jpg',
    'Assets/OmjImages/French.JPG',
    'Assets/OmjImages/Suncoast.JPG',
    'Assets/OmjImages/Calico.jpg',
    'Assets/OmjImages/Strat.JPG',
    'Assets/OmjImages/Mead.JPG',
    'Assets/OmjImages/Menomonee.jpg',
    'Assets/OmjImages/Basse.JPG',
    'Assets/OmjImages/Sailboats.jpg',
    'Assets/OmjImages/Atwater.JPG']

    const locations = [
        {
            'title': 'HAPPY ANNIVERSARY, OLIVIA!',
            'description':
                'It ain`t much, but it`s honest work. I love you so much and I cherish all of our memories!',
            'camera': {
                center: [-110, 40],
                zoom: 3.4,
                bearing: 0,
                pitch: 0
            }
        },
        {
            'id': 'Milwaukee Brat House',
            'title': 'Milwaukee Brat House',
            'description':
                "Our very first date! August 26th, 2022.",
            'camera': {
                center: [-87.8874, 43.0897],
                zoom: 19,
                pitch: 20 // Up-down angle, with 0 being straight down and 85 being toward the horizon
            }
        },
        {
            'id': 'Home',
            'title': 'Home',
            'description':
                "You, me, cats, plants, food, TV, games, dancing, and bed.",
            'camera': {
                center: [-87.8870, 43.089],
                bearing: -8.9, //Compass, 0 is north. Bearing increases clockwise.
                zoom: 16
            }
        },
        {
            'id': 'UWM',
            'title': 'UWM',
            'description':
                "The hell that brought us together.",
            'camera': {
                center: [-87.8810, 43.0769],
                bearing: 0,
                zoom: 15
            }
        },
        {
            'id': 'Bradford Beach',
            'title': 'Bradford Beach',
            'description':
                'We had Twisted Teas and I got sunburnt.',
            'camera': {
                center: [-87.8770, 43.0598],
                bearing: 15,
                zoom: 14.5
            }
        },
        {
            'id': 'Cheba Hut',
            'title': 'Cheba Hut',
            'description':
                'The subs are so goooood! I would get blissful after just a couple sips, and you always looked phenomenal!',
            'camera': {
                center: [-87.8883, 43.0713],
                bearing: 0,
                zoom: 18
            }
        },
        {
            'id': 'Knuckleheads',
            'title': 'Knuckleheads',
            'description':
                'This was THE PLACE when we started getting high together.',
            'camera': {
                center: [-87.8883, 43.07215],
                bearing: 0,
                zoom: 16
            }
        },
        {
            'id': 'The Elegant Farmer',
            'title': 'The Elegant Farmer',
            'description':
                'I love how happy and excited you get for Autumn! It`s my favorite time of the year.',
            'camera': {
                center: [-88.35, 42.85],
                bearing: 0,
                zoom: 10,
                pitch: 25
            }
        },
        {
            'id': 'Treinen Farm',
            'title': 'Treinen Farm',
            'description':
                'The maze was huge! We took incredible pictures here. I loved feeding the farm animals.',
            'camera': {
                center: [-89.68, 43.3064],
                bearing: 0,
                zoom: 10,
                pitch: 20
            }
        },
        {
            'id': 'Cunningham Community Center',
            'title': 'Cunningham Community Center',
            'description':
                'Never forget our first trip together...MEMPHIS! The most unceremonious family introduction ever.',
            'camera': {
                center: [-90.01, 35.2075],
                bearing: 0,
                zoom: 10.4
            }
        },
        {
            'id': 'Mad Planet',
            'title': 'Mad Planet',
            'description':
                'I got to take you to prom!',
            'camera': {
                center: [-87.905, 43.06735],
                bearing: 0,
                zoom: 15
            }
        },
        {
            'id': 'Qdoba',
            'title': 'Qdoba',
            'description':
                'Also never forget what happened after we ate surf n` turf at Qdoba.',
            'camera': {
                center: [-87.915, 43.12],
                bearing: 0,
                zoom: 14.8,
                pitch: 20
            }
        },
        {
            'id': 'Olbrich Botanical Gardens',
            'title': 'Olbrich Botanical Gardens',
            'description':
                'We went here with Kaushal before his going-away party after having Tacos el Capi.',
            'camera': {
                center: [-89.346, 43.092],
                bearing: 260,
                zoom: 12.5
            }
        },
        {
            'id': 'Chicago Botanic Garden',
            'title': 'Chicago Botanic Garden',
            'description':
                'I guess I was always meant to come here with you first. I`m glad because it makes the place feel more special.',
            'camera': {
                center: [-87.791, 42.1486],
                bearing: 0,
                zoom: 16
            }
        },
        {
            'id': 'Ascend Dispensary',
            'title': 'Ascend Dispensary',
            'description':
                'This is where we get the good stuff from. Also, I can`t wait to have Sushi Taku again.',
            'camera': {
                center: [-87.6996, 41.9244],
                bearing: 0,
                zoom: 14,
                pitch: 0
            }
        },
        {
            'id': 'Elite Boba',
            'title': 'Elite Boba',
            'description':
                'We used to come here regularly. Just thinking about it makes me want the Oreo smoothie.',
            'camera': {
                center: [-87.89, 43.0565],
                bearing: 34.6,
                zoom: 17,
                pitch: 0
            }
        },
        {
            'id': 'Ridge Run',
            'title': 'Ridge Run',
            'description':
                'This place was a part of your childhood and it`s where you showed me how to catch toads.',
            'camera': {
                center: [-88.2163, 43.4184],
                bearing: 0,
                zoom: 13,
                pitch: 20
            }
        },
        {
            'id': 'Lou Malnati\'s',
            'title': 'Lou Malnati`s',
            'description':
                'Having a girlfriend who likes deep dish is a dream come true.',
            'camera': {
                center: [-88.1091, 43.035],
                bearing: 0,
                zoom: 15,
                pitch: 10
            }
        },
        {
        'id': 'Shedd Aquarium',
            'title': 'Shedd Aquarium',
            'description':
                'One of your favorite pictures of me. I`m still upset we didn`t see the weedy seadragons.',
            'camera': {
                center: [-87.6145, 41.8676],
                bearing: 0,
                zoom: 15,
                pitch: 10
            }
        },
        {
        'id': 'Lantern Festival',
            'title': 'Lantern Festival',
            'description':
                'One of the most beautiful events of the summer, the lantern festival.',
            'camera': {
                center: [-87.8909, 43.0484],
                bearing: 345,
                zoom: 14.5,
                pitch: 10
            }
        },
        {
        'id': 'The Art Institute of Chicago',
            'title': 'The Art Institute of Chicago',
            'description':
                'Paige kept running off, but at least I found my French doppelganger.',
            'camera': {
                center: [-87.628, 41.8796],
                bearing: 0,
                zoom: 13.8,
                pitch: 20
            }
        },
        {
        'id': 'Suncoast Hotel and Casino',
            'title': 'Suncoast Hotel and Casino',
            'description':
                'We made a lot of memories here in just a few days, but the times we swam in the pool were my favorite.',
            'camera': {
                center: [-115.292, 36.1692],
                bearing: 0,
                zoom: 15,
                pitch: 10
            }
        },
        {
        'id': 'Calico Basin',
            'title': 'Calico Basin',
            'description':
                'This was a fun little excursion. I put this one in because I love how the map looks from this perspective.',
            'camera': {
                center: [-115.43, 36.15],
                bearing: 0,
                zoom: 10.1,
                pitch: 0
            }
        },
        {
        'id': 'The Strat',
            'title': 'The Strat',
            'description':
                'Extended vacation, baby! Also, remember when your mom fell in the pool. Lol.',
            'camera': {
                center: [-115.152, 36.141],
                bearing: 180,
                zoom: 13.41,
                pitch: 29
            }
        },
        {
        'id': 'Hoover Dam Security',
            'title': 'Hoover Dam Security',
            'description':
                '"it`s weed..."',
            'camera': {
                center: [-114.75, 36.036],
                bearing: 0,
                zoom: 11.5,
                pitch: 0
            }
        },
        {
        'id': 'Menomonee Park',
            'title': 'Menomonee Park',
            'description':
                'This is where we found turkey tail mushrooms and saw sandhill cranes.',
            'camera': {
                center: [-88.172, 43.1588],
                bearing: 0,
                zoom: 13,
                pitch: 0
            }
        },
        {
        'id': 'Basse\'s Farms',
            'title': 'Basse`s Farms',
            'description':
                'STRAWBERRY PICKING! They were so delicious and stayed good for days!',
            'camera': {
                center: [-88.1972, 43.1936],
                zoom: 12,
                pitch: 15
            }
        },
        {
        'id': 'The Sailboats',
            'title': '"The Sailboats"',
            'description':
                'This was probably the most magical place this year. The boats, the swallows, the dragonflies, the chicory.',
            'camera': {
                center: [-87.885, 43.045],
                bearing: 130,
                zoom: 14.5,
                pitch: 15
            }
        },
        {
        'id': 'Atwater Park',
            'title': 'Atwater Park',
            'description':
                'Estabrook Park has its share of memories, but I wanted to include some newer memories. Plus, I have pictures!',
            'camera': {
                center: [-87.8731, 43.093],
                bearing: 90,
                zoom: 15,
                pitch: 15
            }
        }
    ];

    function highlightSpot(code) {
        // Only label the point feature that corresponds to `Name` in the data.
        map.setFilter('omj-map-coordinates-05-shee-b2utxc copy', ['==', 'Name', code]);
    }

    function setImage(index) {
        photo.src = images[index] //Image for a specific location is based on the images list position, which corresponds to the locations list.
    }

    function playback(index) {

        title.textContent = locations[index].title; //The title for a specific location is based on the locations list position
        description.textContent = locations[index].description;
        setImage(index); //Passing the index into the setImage function synchronizes the locations with the images

        //Argument for highlightSpot, which is the "code" parameter, is determined by locations list position.
        highlightSpot(locations[index].id ? locations[index].id : '');

        // Animate the map position based on camera properties.
        const flyLocation = locations[index].camera;
        map.flyTo({
            ...flyLocation, //"..." is the spread operator, which is necessary for passing all parts of locations such as pitch, zoom, etc. into flyTo.
            speed: 0.6,
            essential: true
        });

        map.once('movestart', () => {
            $(document).ready(function(){
            $("#location-title").fadeIn(2000);
            $("#location-description").fadeIn(2000);
            $("#location-photo").fadeIn(2000);
            });
        });

        map.once('moveend', () => {
            // Duration the slide is on screen after interaction.
            window.setTimeout(() => {
                // Increment index, looping back to the first after the last location.
                index = (index + 1) % locations.length;
                playback(index);
            }, 5000); // After callback, show the location for 18 seconds.

            //Fade Out inside map.once Moveend to time according to map transition (otherwise fade out won't synchronize)
            $(document).ready(function(){
            $("#location-title").stop(false, true).delay(2000).fadeOut(3000);
            $("#location-description").stop(false, true).delay(2000).fadeOut(3000);
            $("#location-photo").stop(false, true).delay(2000).fadeOut(3000);
            });
        });
    }

    map.on('load', () => {
        // Start the playback animation for each location.
        playback(0);
    });
</script>

</body>
</html>